{
  "name": "Mail Agend Pinecone",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -128,
        0
      ],
      "id": "09cf56b2-8635-4384-bbc7-5f25674aec38",
      "name": "When chat message received",
      "webhookId": "e576c3da-7ee1-4b8d-9aa1-cc8664f56d15"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=# Role:\nYou are an intelligent email agent that automatically sends personalized emails to recipients. Your task is to generate and send a clear, professional, and accurate email based on the provided names, email addresses, and desired content.\n\n## Rules & Behavior:\n\n# You have 2 Tools and need to use them correctly\n\n## Vectorstore_mails\nUse this tool to get Email addresses\n\n## send_mail\nUse this tool to send mails.\n\n### Email Format:\n- The email must include a **subject line**.\n- It should begin with an appropriate **salutation** (e.g., \"Hello [Name]\" or \"Dear [Name]\").\n- The **main content** should be clear, concise, and friendly.\n- The email should end with a **suitable closing phrase** (e.g., \"Best regards, Arnie\").\n\n### Dynamic Personalization:\n- Automatically replace the placeholder **[Name]** with the recipientâ€™s actual name.\n- If the name is missing, use a general salutation such as **\"Hello, dear team\"**.\n\n### Review & Optimization:\n- Avoid unnecessary **repetitions or vague wording**.\n- If the message is **too long or unstructured**, summarize it clearly.\n\n## Email Types (Adaptable Based on Context):\n- Standard information email\n- Reminder or follow-up\n- Offer or marketing email\n- Support or customer service request\n\n---\n\n### Example of a Generated Email:\n\n**Subject:** Important Information for You, [Name]\n\n**Text:**\nHello [Name],\n\nI hope you are doing well. I wanted to quickly inform you about [Topic]. If you have any questions or need further information, feel free to reach out.\n\nBest regards,\nFran"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        208,
        0
      ],
      "id": "e7998ed9-8237-4dc5-a5c1-d482d2fa85c4",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -112,
        192
      ],
      "id": "c2b1ccf9-e0b0-45de-bd8c-1dcb265392fd",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "Bjm6VVoNUs4IN9Oa",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "description": "Use this tool to get email information, you find all relevant mail adresses."
      },
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1.1,
      "position": [
        96,
        208
      ],
      "id": "228bfffe-6735-48f8-ad9e-9ed0bd76760a",
      "name": "Vectorstore Mails"
    },
    {
      "parameters": {
        "pineconeIndex": {
          "__rl": true,
          "value": "n8ndocs",
          "mode": "list",
          "cachedResultName": "n8ndocs"
        },
        "options": {
          "pineconeNamespace": "docsmail"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        -96,
        368
      ],
      "id": "3544713f-878a-49f4-aa6b-1b9a1ccca3e6",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "abqrMyPQzIOTanG9",
          "name": "PineconeApi account 2"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 512
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        176,
        512
      ],
      "id": "c6d34cca-88c7-4e1f-86e5-4772f6364076",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "Bjm6VVoNUs4IN9Oa",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        368,
        368
      ],
      "id": "730fe1da-36f7-40d5-b62a-22cd3abaca26",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "Bjm6VVoNUs4IN9Oa",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "description": "Use this tool to send mails.",
        "workflowId": {
          "__rl": true,
          "value": "T_eOV99H51N1V4Y9794P1",
          "mode": "list",
          "cachedResultUrl": "/workflow/T_eOV99H51N1V4Y9794P1",
          "cachedResultName": "Send Mails Pinecone"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        672,
        144
      ],
      "id": "8b869efc-af30-44cc-9727-c34b6082c5f4",
      "name": "send_mail"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Vectorstore Mails": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "ai_vectorStore": [
        [
          {
            "node": "Vectorstore Mails",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Vectorstore Mails",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "send_mail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "36a2d69c-776f-499b-be3a-e041e5d4b0cd",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "1b434715cb9a1c75a861a81c1fea50b68fc23266cffb9a73125fbbf360432529"
  },
  "id": "KQD9GkXjZce4hwjVC3aAt",
  "tags": []
}